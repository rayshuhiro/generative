```html
<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hand Index → Star Angle</title>

<style>
html, body {
  margin: 0;
  height: 100%;
  overflow: hidden;
  background: #000;
}

#wrap {
  position: fixed;
  inset: 0;
}

video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scaleX(-1);
}

#canvas {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

/* ★ 星 */
.star {
  position: absolute;
  pointer-events: none;
  animation: appear 0.3s ease-out forwards;
  clip-path: polygon(
    50% 0%,
    61% 35%,
    98% 35%,
    68% 57%,
    79% 91%,
    50% 70%,
    21% 91%,
    32% 57%,
    2% 35%,
    39% 35%
  );
}

@keyframes appear {
  from { transform: scale(0) rotate(0deg); opacity: 0; }
  to   { transform: scale(1) rotate(var(--rot)); opacity: 1; }
}

#msg {
  position: fixed;
  top: 12px;
  left: 12px;
  padding: 8px 12px;
  border-radius: 6px;
  background: rgba(0,0,0,.5);
  color: #fff;
  font-size: 14px;
  z-index: 10;
}
</style>
</head>

<body>

<div id="wrap">
  <video id="cam" autoplay playsinline></video>
  <div id="canvas"></div>
</div>
<div id="msg">初期化中…</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script type="module">
import { HandLandmarker, FilesetResolver } from
  "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0";

/* ===============================
   設定
================================ */
const MAX_STARS = 120;
const LIFE_TIME = 800;
const FADE_TIME = 600;

/* ===============================
   DOM
================================ */
const video  = document.getElementById("cam");
const canvas = document.getElementById("canvas");
const msg    = document.getElementById("msg");

/* ===============================
   MediaPipe
================================ */
let handLandmarker;
let lastVideoTime = -1;

/* ===============================
   カメラ
================================ */
async function startCamera() {
  const stream = await navigator.mediaDevices.getUserMedia({
    video: { facingMode: "user" },
    audio: false
  });
  video.srcObject = stream;
  await new Promise(r => video.onloadedmetadata = r);
  await video.play().catch(()=>{});
}

/* ===============================
   MediaPipe 初期化
================================ */
async function initMediaPipe() {
  const vision = await FilesetResolver.forVisionTasks(
    "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm"
  );

  handLandmarker = await HandLandmarker.createFromOptions(vision, {
    baseOptions: {
      modelAssetPath:
        "https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task"
    },
    runningMode: "VIDEO",
    numHands: 2
  });
}

/* ===============================
   星生成（角度付き）
================================ */
function makeStarAt(x, y, angle) {

  const stars = $('#canvas .star');
  if (stars.length > MAX_STARS) {
    stars.first().remove();
  }

  const size = Math.random() * 80 + 20;

  const r = Math.floor(Math.random() * 256);
  const g = Math.floor(Math.random() * 256);
  const b = Math.floor(Math.random() * 256);
  const a = Math.random();

  const $star = $('<div></div>')
    .addClass('star')
    .css({
      width: size + 'px',
      height: size + 'px',
      left: (x - size / 2) + 'px',
      top:  (y - size / 2) + 'px',
      backgroundColor: `rgba(${r}, ${g}, ${b}, ${a})`,
      '--rot': angle + 'deg'
    });

  $('#canvas').append($star);

  setTimeout(() => {
    $star.fadeOut(FADE_TIME, function () {
      $(this).remove();
    });
  }, LIFE_TIME);
}

/* ===============================
   ループ
================================ */
function loop() {
  const now = performance.now();

  if (video.currentTime !== lastVideoTime) {
    const result = handLandmarker.detectForVideo(video, now);
    lastVideoTime = video.currentTime;

    const hands = result?.landmarks || [];

    if (hands.length) {
      msg.textContent = "人差し指で描画中";
      const rect = canvas.getBoundingClientRect();

      hands.forEach(hand => {
        // 人差し指：6 → 8 の方向
        const p6 = hand[6];
        const p8 = hand[8];

        const x6 = (1 - p6.x) * rect.width;
        const y6 = p6.y * rect.height;
        const x8 = (1 - p8.x) * rect.width;
        const y8 = p8.y * rect.height;

        // 角度計算
        const angle =
          Math.atan2(y8 - y6, x8 - x6) * 180 / Math.PI;

        makeStarAt(x8, y8, angle);
      });

    } else {
      msg.textContent = "手が見つかりません";
    }
  }

  requestAnimationFrame(loop);
}

/* ===============================
   起動
================================ */
(async function main() {
  try {
    await startCamera();
    await initMediaPipe();
    msg.textContent = "手を映してください";
    requestAnimationFrame(loop);
  } catch (e) {
    console.error(e);
    msg.textContent = "起動できません";
  }
})();
</script>

</body>
</html>
```
